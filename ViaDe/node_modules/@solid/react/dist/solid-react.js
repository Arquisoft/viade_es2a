var solid="object"==typeof solid?solid:{};solid.react=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t){e.exports=React},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t){e.exports=solid.auth},function(e,t){e.exports=solid.data},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){e.exports=function(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(2),u=n.n(i);let c=void 0;const s=new Set,a=(e,t)=>t;function l(e=a){const[t,n]=Object(r.useReducer)(e,c,e);return Object(r.useDebugValue)(c),Object(r.useEffect)(()=>(n(c),s.add(n),()=>s.delete(n)),[]),t}u.a.trackSession(e=>{c=e?e.webId:null;for(const e of s)e(c)});const d=(e,t)=>void 0===t?void 0:null!==t;function f(){const e=l(d);return Object(r.useDebugValue)(e),e}const p=(e,t)=>void 0===t?void 0:null===t;function h(){const e=l(p);return Object(r.useDebugValue)(e),e}var b=o.a.createContext({});function m(){const e=Object(r.useContext)(b);return Object(r.useDebugValue)(e.timestamp||null),e}var v=n(4),g=n.n(v),y=n(5),w=n.n(y);function j(e){return/^https?:[^"]+$/.test(e)&&(e=`["${e}"]`),e}function x(e,t){const n={};for(const r of t)n[r]=e[r];return n}function O(e){return e.displayName||e.name||"Component"}function E({drop:e=!1,timeBetween:t=10,concurrent:n=(e?1:4)}={}){let r=[],o=0;function i(){o=r.length&&setTimeout(i,t),r.splice(0,n).forEach(async({run:e,resolve:t,reject:n})=>{try{t(await e())}catch(e){n(e)}})}return{schedule:function t(n,u=null){if(!Array.isArray(n))return t([n])[0];const c=[],s=n.map(e=>new Promise((t,n)=>c.push({run:e,resolve:t,reject:n,group:u})));return e?r=c:r.push(...c),o||i(),s},clear:function(e){const t=r.length>0;return r=r.filter(t=>void 0!==e&&t.group!==e),t}}}var L=n(3),$=n.n(L);const k=E();class S{constructor(){g()(this,"pending",{}),g()(this,"cancel",!1)}destroy(){this.pending={},this.cancel=!0,k.clear(this)}async evaluate(e,t,n){n({pending:!0,error:void 0});const r=k.schedule([...Object.entries(e).map(([e,t])=>()=>this.evaluateAsValue(e,t,n)),...Object.entries(t).map(([e,t])=>()=>this.evaluateAsList(e,t,n))],this);try{await Promise.all(r)}catch(e){n({error:e})}const o=await Promise.all(r.map(e=>e.catch(e=>(console.warn("@solid/react-components","Expression evaluation failed.",e),!0))));this.cancel||o.some(e=>!e)||0!==Object.keys(this.pending).length||n({pending:!1})}async evaluateAsValue(e,t,n){const r=this.pending[e]=this.resolveExpression(t);let o;try{if(o=await r,this.pending[e]!==r)return!1}finally{this.pending[e]===r&&(delete this.pending[e],n({[e]:o}))}return!0}async evaluateAsList(e,t,n){let r=!0;const o=[],i=this.pending[e]=this.resolveExpression(t),u=()=>!this.cancel&&n({[e]:[...o]}),c=E({timeBetween:100,drop:!0});try{var s,a=!0,l=!1;try{for(var d,f,p=w()(i);a=(d=await p.next()).done,f=await d.value,!a;a=!0){const t=f;if(this.pending[e]!==i)return c.clear(),!1;r=!1,o.push(t),c.schedule(u)}}catch(e){l=!0,s=e}finally{try{a||null==p.return||await p.return()}finally{if(l)throw s}}}finally{const t=r||c.clear();this.pending[e]===i&&(delete this.pending[e],t&&u())}return!0}resolveExpression(e){return e?"string"==typeof e?$.a.resolve(e):e:""}}const D={result:void 0,pending:!0,error:void 0},N={result:[],pending:!0,error:void 0},A={};function I(e,t=!1){const n=l(),o=m(),[{result:i,pending:u,error:c},s]=Object(r.useState)(t?N:D);return Object(r.useDebugValue)(c||i,P),Object(r.useEffect)(()=>{const n=new S,r={result:e};return n.evaluate(t?A:r,t?r:A,e=>s(t=>({...t,...e}))),()=>n.destroy()},[e,o,n&&"string"==typeof e]),[i,u,c]}function P(e){return Array.isArray(e)?e.map(P):`${e}`}function T(e){const[t]=I(e,!1);return Object(r.useDebugValue)(t,P),t}function V(e){const[t]=I(e,!0);return Object(r.useDebugValue)(t,P),t}var C,B,U=n(1),W=n.n(U),_=(C="WithWebId",B=e=>t=>o.a.createElement(e,W()({},t,{webId:l()})),e=>{const t=B(e);return t.displayName=`${C}(${O(e)})`,t});function F(e,t,n){n||([n,t]=[t,[]]),e=e?[...e]:[],t=t?[...t]:[];const r={pending:!0};for(const t of e)r[t]=void 0;for(const e of t)r[e]=[];class i extends o.a.Component{constructor(...e){super(...e),g()(this,"state",r)}componentDidMount(){this.evaluator=new S,this.update=e=>this.setState(e),this.evaluate(e,t)}componentDidUpdate(n){const r=this.props.webId!==n.webId,o=e=>this.props[e]!==n[e]||r&&"string"==typeof this.props[e];this.evaluate(e.filter(o),t.filter(o))}componentWillUnmount(){this.evaluator.destroy()}render(){return o.a.createElement(n,W()({},this.props,this.state))}evaluate(e,t){const{props:n,evaluator:r}=this;(e.length>0||t.length>0)&&r.evaluate(x(n,e),x(n,t),this.update)}}return g()(i,"displayName",`EvaluateExpressions(${O(n)})`),_(i)}function M(e,t){return F([],[e],t)}function q({children:e=null}){return f()?e:null}function R({children:e=null}){return h()?e:null}function Y({popup:e,children:t="Log in",className:n="solid auth login"}){return o.a.createElement("button",{className:n,onClick:()=>u.a.popupLogin({popupUri:e})},t)}function z({children:e="Log out",className:t="solid auth logout"}){return o.a.createElement("button",{className:t,onClick:()=>u.a.logout()},e)}function G({login:e,logout:t,...n}){return f()?o.a.createElement(z,n,t):o.a.createElement(Y,n,e)}function H({src:e,children:t}){const[n,r,i]=I(e);return null!=n?`${n}`:r?t||o.a.createElement("span",{className:"solid value pending"}):i?t||o.a.createElement("span",{className:"solid value error","data-error":i.message}):t||o.a.createElement("span",{className:"solid value empty"})}function J({src:e,defaultSrc:t,children:n=null,...r}){return(e=T(e)||t)?o.a.createElement("img",W()({src:e,alt:""},r)):n}function K({src:e,children:t=null}){return o.a.createElement(H,{src:e&&`${j(e)}.label`},t)}function Q({href:e,children:t,...n}){return e=T(e)||"",t=t||o.a.createElement(K,{src:e&&`[${e}]`},`${e}`),e?o.a.createElement("a",W()({href:e},n),t):t}function X({src:e,children:t=null}){return o.a.createElement(H,{src:e&&`${j(e)}.name`},t)}function Z({src:e,offset:t=0,limit:n=1/0,filter:r=(()=>!0),container:i=(e=>o.a.createElement("ul",null,e)),children:u=((e,t)=>o.a.createElement("li",{key:t},`${e}`))}){const c=V(e).filter(r).slice(t,+t+ +n).map(u);return i?i(c):c}const ee="*",te={},ne={},re=new Set;class oe{constructor(e){this.subscriber=e}subscribe(...e){for(let t of e)(t=t.replace(/#.*/,""))in te||(te[t]=new Set,t!==ee?ie(t):re.forEach(ie)),te[t].add(this.subscriber)}unsubscribe(...e){for(let t of e)(t=t.replace(/#.*/,""))in te&&te[t].delete(this.subscriber)}}function ie(e){const{protocol:t,host:n}=new URL(e);let r=ne[n];if(!r){const e=`${t.replace("http","ws")}//${n}/`;ne[n]=r=new WebSocket(e),Object.assign(r,{enqueue:ue,onmessage:ce,ready:new Promise(e=>r.onopen=e)})}r.enqueue(`sub ${e}`)}async function ue(e){await this.ready,this.send(e)}function ce({data:e}){const t=/^pub +(.+)/.exec(e);if(!t)return;const n=t[1];$.a.clearCache(n);const r={timestamp:new Date,url:n};for(const e of te[n]||[])e(r);for(const e of te[ee]||[])e(r)}u.a.on("request",e=>{re.has(e)||(ee in te&&ie(e),re.add(e))});const{Provider:se}=b;function ae({subscribe:e="*",children:t=null}){const n=function(...e){const[t,n]=Object(r.useState)({});return Object(r.useDebugValue)(t.timestamp||null),Object(r.useEffect)(()=>{const t=new oe(n);return t.subscribe(...e),()=>t.unsubscribe(...e)},e),t}(..."string"!=typeof e?e:/\S/.test(e)?e.trim().split(/\s+/):[]);return o.a.createElement(se,{value:n},t)}const{as:le}=$.a.context;function de({activityType:e=`${le}Like`,object:t=`[${window.location.href}]`,children:n,shortName:i=/\w*$/.exec(e)[0],className:u=`solid activity ${i.toLowerCase()}`,activateText:c=i,deactivateText:s=c,activateLabel:a=(n?[c," ",n]:c),deactivateLabel:l=(n?[s," ",n]:s),...d}){t=j(t);const[f,p]=Object(r.useState)(),h=T(`${t}.findActivity("${e}")`);return void 0===f&&h&&p(!0),u=`${u} ${f?"performed":""}`,o.a.createElement("button",W()({className:u,onClick:async function(){p(!f);try{const n=f?"delete":"create";await $.a.resolve(`${t}.${n}Activity("${e}")`),p(!f)}catch(e){p(f),console.warn("@solid/react-components",e)}}},d),f?l:a)}function fe(e,t,n,r){const i=`${le}${e}`;return({object:e,children:u=(e?null:"this page"),activateText:c=t,deactivateText:s=(u?n:r),...a})=>o.a.createElement(de,W()({},a,{activityType:i,object:e,children:u,activateText:c,deactivateText:s}))}var pe=fe("Like","Like","You liked","Liked"),he=fe("Dislike","Dislike","You disliked","Disliked"),be=fe("Follow","Follow","You follow","Following");n.d(t,"useWebId",function(){return l}),n.d(t,"useLoggedIn",function(){return f}),n.d(t,"useLoggedOut",function(){return h}),n.d(t,"useLDflex",function(){return I}),n.d(t,"useLDflexValue",function(){return T}),n.d(t,"useLDflexList",function(){return V}),n.d(t,"useLiveUpdate",function(){return m}),n.d(t,"withWebId",function(){return _}),n.d(t,"evaluateExpressions",function(){return F}),n.d(t,"evaluateList",function(){return M}),n.d(t,"LoggedIn",function(){return q}),n.d(t,"LoggedOut",function(){return R}),n.d(t,"LoginButton",function(){return Y}),n.d(t,"LogoutButton",function(){return z}),n.d(t,"AuthButton",function(){return G}),n.d(t,"Value",function(){return H}),n.d(t,"Image",function(){return J}),n.d(t,"Link",function(){return Q}),n.d(t,"Label",function(){return K}),n.d(t,"Name",function(){return X}),n.d(t,"List",function(){return Z}),n.d(t,"LiveUpdate",function(){return ae}),n.d(t,"ActivityButton",function(){return de}),n.d(t,"LikeButton",function(){return pe}),n.d(t,"Like",function(){return pe}),n.d(t,"DislikeButton",function(){return he}),n.d(t,"Dislike",function(){return he}),n.d(t,"FollowButton",function(){return be}),n.d(t,"Follow",function(){return be}),n.d(t,"UpdateContext",function(){return b})}]);
//# sourceMappingURL=solid-react.js.map